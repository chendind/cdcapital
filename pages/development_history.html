<!DOCTYPE html>
<html>
<head>
	<title>Development History</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="../css/public.css">
	<link rel="stylesheet" type="text/css" href="../css/development_history.css">
	<link rel="stylesheet" type="text/css" href="../flaticon/flaticon.css">
</head>
<body>
	<div id="vm">
		<above></above>
		<login></login>
		<div class="one">
			<banner></banner>
			<manu-details></manu-details>
		</div>
		<div class="two">
			<div class="ch">发展历程</div>
			<div class="en">- Development History -</div>
		</div>
		<div class="three">
			<div v-for="(val,index) in items">
				<div class="year">{{index}}</div>
				<ul>
					<li v-for="item in val">
						<div class="ruler">
							<div></div><div></div><div></div><div></div>
							<div class="m"></div>
							<div></div><div></div><div></div><div></div>
							<div class="l"></div>
						</div>
						<span class="time">{{getTimeCh(item.time)}}</span>
						<span>
							<a :href="'detail.html?'+encodeObj({'id':item.id})">	
								{{item.name}}
							</a>
						</span>
					</li>
			</ul>
			</div>
		</div>
		<five></five>
		<six></six>
	</div>
	<script src="../js/jquery-1.7.1.js" type="text/javascript"></script>
	<script src="../js/jquery.touchslider.min.js" type="text/javascript"></script>
	<script src="../js/vue.js" type="text/javascript"></script>
	<script src="../js/pagination.js" type="text/javascript"></script>
	<script src="../js/ajax.js" type="text/javascript"></script>
	<script src="../js/public.js" type="text/javascript"></script>
	<script type="text/javascript">

		var vm = new Vue({
			el: "#vm",
			data: {
				items: {}
			},
			methods: {
				getTimeCh: function (stamp) {
					var date = new Date(stamp);
					m = date.getMonth() + 1;
					d = date.getDate();
					return (m>9?m:"0"+m) + "月"  + (d>9?d:"0"+d) + "日";
				},
				getYear: function (stamp) {
					var date = new Date(stamp);
					return date.getFullYear();
				}
			},
			mounted: function () {
				var self = this;
				$.when(getDevelopmentList())
				.done(function (data) {
					var list = data.list;
					self.items = {};
					for (var i = 0; i < list.length; i++) {
						if(self.items[self.getYear(list[i].time)] === undefined){
							self.items[self.getYear(list[i].time)] = [list[i]];
						}
						else{
							self.items[self.getYear(list[i].time)].push(list[i]);
						}
					}
				});
			}
		})
	</script>
</body>
</html>





















