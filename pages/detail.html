<!DOCTYPE html>
<html>
<head>
	<title>创道资本</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="format-detection" content="telephone=no"/>
	<link rel="stylesheet" type="text/css" href="../css/public.css">
	<link rel="stylesheet" type="text/css" href="../css/detail.css">
	<link rel="stylesheet" type="text/css" href="../flaticon/flaticon.css">
</head>
<body>
	<div id="vm" v-cloak>
		<above></above>
		<login></login>
		<div class="questionnaire" v-if="option >= 0">
		<div>
			<div class="title">
					<fieldset>
						<legend>问卷调查</legend>
					</fieldset>
					<img src="../images/关闭 (1).png" @click="option = -1">
			</div>
			<div class="content">
				<div class="choose" v-if="option === 0">
					<p>您第一次进行预约理财，请先进行问卷调查</p>
					<div class="person" @click="option = 1">
						<img src="../images/个人 (1).png">
						<p>个人投资者</p>
					</div>
					<div class="organization" @click="option = 2">
						<img src="../images/机构 (1).png">
						<p>机构投资者</p>
					</div>
				</div>
				<ques-person v-on:submitques="appointment" class="ques-person" v-if="option === 1">
				</ques-person>
				<ques-organization v-on:submitques="appointment" class="ques-organization" v-if="option === 2">
				</ques-organization>
			</div>
		</div>
		</div>
		<div class="one">
			<banner></banner>
			<manu-details></manu-details>
		</div>
		<div class="two">
			<div class="two_top">
				<p class="title">{{item.title}}</p>
				<p class="time" v-if="item.time">{{getTime(item.time)}}</p>
			</div>
			<div class="text" v-html="item.text"></div>
		</div>
		<div class="three" v-if="item.type === 'PROJECT_GALLERY'">
			<div @click="appointment"><img src="../images/理财.png">预约理财</div>
			<a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=364044816&site=qq&menu=yes">
				<div><img src="../images/咨询.png">我要咨询</div>
			</a>
		</div>
		<five></five>
		<six></six>
	</div>
	<script src="../js/jquery-1.7.1.js" type="text/javascript"></script>
	<script src="../js/jquery.touchslider.min.js" type="text/javascript"></script>
	<script src="../js/vue.js" type="text/javascript"></script>
	<script src="../js/pagination.js" type="text/javascript"></script>
	<script src="../js/public.js" type="text/javascript"></script>
	<script src="../js/ajax.js" type="text/javascript"></script>
	<script type="text/javascript">

		var vm = new Vue({
			el: "#vm",
			data: {
				item: {},
				option: -1,
				ques_result: {},
			},
			methods:{
				appointment: function (argument) {
					var self = this;
					var id = self.getQueryData().id;
					$.when(isLogin())
					.done(function (data) {
						if(data.state === 0){
							$.when(isSubmitted())
							.done(function (data) {
								if(data){
									$.when(reserve (id))
									.done(function (data) {
										if(data.state === 0){
											alert("预约成功！");
											self.option = -1;
										}
										else{
											alert(data.detail);
										}
									})
								}
								else{
									self.option = 0;
								}
							})
						}
						else{
							$('.login').removeClass('hidden');
							$("ul.top li.register div span").text("注册-登录");
						}
					})
				}
			},
			mounted: function () {
				var self = this;
				var id = self.getQueryData().id;
				$.when(getGallery(id))
				.done(function (data) {
					self.item = data;
				})
			}
		})
	</script>
</body>
</html>


















