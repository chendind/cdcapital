<!DOCTYPE html>
<html>
<head>
	<title>创道资本</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="format-detection" content="telephone=no"/>
	<link rel="stylesheet" type="text/css" href="../css/public.css">
	<link rel="stylesheet" type="text/css" href="../css/development_history.css">
	<link rel="stylesheet" type="text/css" href="../flaticon/flaticon.css">
</head>
<body>
	<div id="vm" v-cloak>
		<above></above>
		<login></login>
		<div class="one">
			<banner></banner>
			<manu-details></manu-details>
		</div>
		<div class="two">
			<div class="ch">发展历程</div>
			<div class="en">- Development History -</div>
		</div>
		<div class="three">
			<div v-for="val in items">
				<div class="year">{{val.year}}</div>
				<ul>
					<li v-for="item in val.item">
						<div class="ruler">
							<div></div><div></div><div></div><div></div>
							<div class="m"></div>
							<div></div><div></div><div></div><div></div>
							<div class="l"></div>
						</div>
						<span class="time">{{getTimeCh(item.time)}}</span>
						<span>
							<a :href="item.url?(new RegExp('^http://').test(item.url)?item.url:('http://'+item.url)):'detail.html?'+encodeObj({'id':item.id})" target="_blank">	
								{{item.name}}
							</a>
						</span>
					</li>
			</ul>
			</div>
		</div>
		<five></five>
		<six></six>
		<back-button></back-button>
	</div>
	<script src="../js/jquery-1.7.1.js" type="text/javascript"></script>
	<script src="../js/jquery.touchslider.min.js" type="text/javascript"></script>
	<script src="../js/vue.js" type="text/javascript"></script>
	<script src="../js/pagination.js" type="text/javascript"></script>
	<script src="../js/ajax.js" type="text/javascript"></script>
	<script src="../js/public.js" type="text/javascript"></script>
	<script type="text/javascript">

		var vm = new Vue({
			el: "#vm",
			data: {
				items: []
			},
			methods: {
				getTimeCh: function (stamp) {
					var date = new Date(stamp);
					m = date.getMonth() + 1;
					d = date.getDate();
					return (m>9?m:"0"+m) + "月"  + (d>9?d:"0"+d) + "日";
				},
				getYear: function (stamp) {
					var date = new Date(stamp);
					return date.getFullYear();
				}
			},
			mounted: function () {
				var self = this;
				$.when(getDevelopmentList())
				.done(function (data) {
					var list = data.list;
					self.items = [];
					var year = null;
					var count = -1;
					for (var i = 0; i < list.length; i++) {
						if(self.getYear(list[i].time) === year){
							self.items[count].item.push(list[i]);
						}
						else{
							year = self.getYear(list[i].time);
							count ++;
							self.items.push({"year":year,item:[list[i]]});
						}
					}
				});
			}
		})
	</script>
</body>
</html>





















