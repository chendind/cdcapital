<!DOCTYPE html>
<html>
<head>
	<title>创道资本</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="format-detection" content="telephone=no"/>
	<link rel="stylesheet" type="text/css" href="../css/public.css">
	<link rel="stylesheet" type="text/css" href="../css/project_dynamics.css">
	<link rel="stylesheet" type="text/css" href="../flaticon/flaticon.css">
</head>
<body>
	<div id="vm" v-cloak>
		<above></above>
		<login></login>
		<div class="one">
			<banner></banner>
			<manu-details></manu-details>
		</div>
		<div class="two">
			<div class="ch">项目动态</div>
			<div class="en">- Project Dynamics -</div>
		</div>
		<div class="three">
			<div v-for="(item, index) in items">
				<div v-if="index % 2 === 0" class="leftImage" :style="{backgroundImage: 'url('+baseUrl+item.img+')'}">
				</div>
				<div v-else class="rightImage" :style="{backgroundImage: 'url('+baseUrl+item.img+')'}">
				</div>
				<div class="content">
					<a :href="'detail.html?'+encodeObj({'id':item.id})" target="_blank">
						<p class="title">{{item.name}}</p>
					</a>
					<p class="time">{{getTime(item.time)}}</p>
					<hr>
					<p class="text">{{item.summary}}</p>
					<a :href="'detail.html?'+encodeObj({'id':item.id})" target="_blank"><button class="more">了解更多</button></a>
				</div>
			</div> 
			<div class="M-box" v-if="countAll > 20"></div>
		</div>
		<five></five>
		<six></six>
		<back-button></back-button>
	</div>
	<script src="../js/jquery-1.7.1.js" type="text/javascript"></script>
	<script src="../js/jquery.touchslider.min.js" type="text/javascript"></script>
	<script src="../js/vue.js" type="text/javascript"></script>
	<script src="../js/pagination.js" type="text/javascript"></script>
	<script src="../js/public.js" type="text/javascript"></script>
	<script src="../js/ajax.js" type="text/javascript"></script>
	<script type="text/javascript">

		var vm = new Vue({
			el: "#vm",
			data: {
				items: [],
				countAll: 0
			},
			mounted:function(){
				var self = this;
				$.when(getArticleForPage(0,20,"PROJECT_DYNAMICS"))
				.done(function (data) {
					self.items = data.list;
					self.countAll = data.countAll;
					self.$nextTick(function(){
						$(".M-box").pagination({
							totalData: data.countAll,
						    showData:20,
						    current:1,
						    count:2,
							prevContent:'上一页',
							nextContent:'下一页',
							coping:true,
						    callback:function(pagination){
						    	$.when(getArticleForPage((pagination.getCurrent()-1)*20,20,"PROJECT_DYNAMICS"))
								.done(function (data) {
									$("body").scrollTop(400);
									self.items = data.list;
								})
						    }
						});
					})
				})
			}
		})
	</script>
</body>
</html>





















